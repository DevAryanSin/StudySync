# Netlify configuration for Next.js app inside the `frontend` subdirectory.
# This uses the Netlify Next plugin which produces the deployable output
# under `.netlify/next`.
[build]
  base = "frontend"
  # Run the Next build, then copy the output into the plugin's expected folder
  command = "npm run build && mkdir -p .netlify/next && cp -R .next .netlify/next"
  publish = ".netlify/next"

# Build-time environment variables (used during Next.js build)
[build.environment]
  NEXT_PUBLIC_API_URL = "https://studysync-136760819044.us-central1.run.app"

[[plugins]]
  package = "@netlify/plugin-nextjs"

# Production runtime environment (Netlify context)
[context.production.environment]
  NEXT_PUBLIC_API_URL = "https://studysync-136760819044.us-central1.run.app"

# Notes:
# - Install the plugin in the frontend folder: `npm install --save-dev @netlify/plugin-nextjs`
# - Set runtime env vars (e.g. NEXT_PUBLIC_API_URL) in Netlify UI under Site → Settings → Build & deploy → Environment.